<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="./css/site.css">
<link rel="stylesheet" href="./css/layout.css">
<link rel="stylesheet" href="./css/greenville.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<title>Greenville Associates Enterprise Software | Enterprise Licensing - My Licenses</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
</style>


</head>
<body class="bg-light" style="background-color: black">
<div class="gacontainer">
<div class="topnav">
    <div class="dropdown">
        <button class="dropbtn">Menu ▼</button>
        <div class="dropdown-content">
            <a href="login.html">Login</a>
            <a href="logout.html">Logout</a>
            <a href="welcome.html">Welcome</a>
            <a href="products.html">All Products</a>
            <a href="licensetypes.html">LicenseTypes</a>
            <a href="mylicenselogs.html">LicenseLogs</a>
            <a href="mylicenses.html">MyLicenses</a>
            <a href="mycart.html?uid=1">MyCart</a>
            <a href="reviews.html">AllReviews</a>
            <a href="Help.html">Help</a>
        </div>
    </div>

    <div class="right-links">
        <a href="userhelp.html">Help</a>
        <a href="usernotices.html">Alerts</a>
        <a href="login.html">Login</a>
        <a href="logout.html">Logout</a>
    </div>
</div>

<header>
    <h1>Greenville Enterprise Software</h1>
    <span>Enterprise‑grade software solutions with flexible deployment and licensing for global organizations.</span>
</header>



<div class="container py-4">

  <h2 class="mb-4 text-center">License Manager</h2>

  <!-- ===================== LICENSE TABLE ===================== -->
  <div class="card mb-4">
    <div class="card-header bg-primary text-white">All Licenses</div>
    <div class="card-body">
      <table class="table table-bordered table-striped" id="licenseTable">
        <thead class="table-dark">
          <tr>
            <th>License ID</th>
            <th>Version</th>
            <th>Install Date</th>
            <th>End Date</th>
            <th>Customer ID</th>
            <th>Product ID</th>
            <th>Description</th>
            <th>Release Year</th>
            <th>Select</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <button class="btn btn-secondary" onclick="loadLicenses()">Refresh</button>
    </div>
  </div>

  <!-- ===================== INSERT FORM ===================== -->
  <div class="card mb-4">
    <div class="card-header bg-success text-white">Insert New License</div>
    <div class="card-body">
      <form id="insertForm">
        <div class="row g-3">
          <div class="col-md-4">
            <label class="form-label">License ID</label>
            <input type="text" class="form-control" name="licenseid" required>
          </div>
          <div class="col-md-4">
            <label class="form-label">Version</label>
            <input type="text" class="form-control" name="version" required>
          </div>
          <div class="col-md-4">
            <label class="form-label">Install Date</label>
            <input type="date" class="form-control" name="installdate" required>
          </div>

          <div class="col-md-4">
            <label class="form-label">End Date</label>
            <input type="date" class="form-control" name="enddate" required>
          </div>
          <div class="col-md-4">
            <label class="form-label">Customer ID</label>
            <input type="text" class="form-control" name="customerid" required>
          </div>
          <div class="col-md-4">
            <label class="form-label">Product ID</label>
            <input type="text" class="form-control" name="productid" required>
          </div>

          <div class="col-md-6">
            <label class="form-label">Description</label>
            <input type="text" class="form-control" name="description" required>
          </div>
          <div class="col-md-6">
            <label class="form-label">Release Year</label>
            <input type="text" class="form-control" name="releaseyear" required>
          </div>
        </div>

        <button class="btn btn-success mt-3" type="submit">Insert License</button>
      </form>
    </div>
  </div>

  <!-- ===================== UPDATE FORM ===================== -->
  <div class="card mb-4">
    <div class="card-header bg-warning">Update Selected License</div>
    <div class="card-body">
      <form id="updateForm">
        <div class="row g-3">
          <div class="col-md-4">
            <label class="form-label">License ID (read‑only)</label>
            <input type="text" class="form-control" name="licenseid" readonly>
          </div>
          <div class="col-md-4">
            <label class="form-label">Version</label>
            <input type="text" class="form-control" name="version" required>
          </div>
          <div class="col-md-4">
            <label class="form-label">Install Date</label>
            <input type="date" class="form-control" name="installdate" required>
          </div>

          <div class="col-md-4">
            <label class="form-label">End Date</label>
            <input type="date" class="form-control" name="enddate" required>
          </div>
          <div class="col-md-4">
            <label class="form-label">Customer ID</label>
            <input type="text" class="form-control" name="customerid" required>
          </div>
          <div class="col-md-4">
            <label class="form-label">Product ID</label>
            <input type="text" class="form-control" name="productid" required>
          </div>

          <div class="col-md-6">
            <label class="form-label">Description</label>
            <input type="text" class="form-control" name="description" required>
          </div>
          <div class="col-md-6">
            <label class="form-label">Release Year</label>
            <input type="text" class="form-control" name="releaseyear" required>
          </div>
        </div>

        <button class="btn btn-warning mt-3" type="submit">Update License</button>
      </form>
    </div>
  </div>

</div>

<script>
const API = "https://api242.onrender.com/licenses";

/* ===================== LOAD ALL LICENSES ===================== */
async function loadLicenses() {
  const res = await fetch(API);
  console.log("all", res);
  const data = await res.json();

  const tbody = document.querySelector("#licenseTable tbody");
  tbody.innerHTML = "";

  data.forEach(lic => {
    const row = `
      <tr>
        <td>${lic.licenseid}</td>
        <td>${lic.version}</td>
        <td>${lic.installdate}</td>
        <td>${lic.enddate}</td>
        <td>${lic.customerid}</td>
        <td>${lic.productid}</td>
        <td>${lic.description}</td>
        <td>${lic.releaseyear}</td>
        <td><button class="btn btn-sm btn-primary" onclick='selectLicense(${JSON.stringify(lic)})'>Select</button></td>
      </tr>
    `;
    tbody.insertAdjacentHTML("beforeend", row);
  });
}

/* ===================== SELECT LICENSE FOR UPDATE ===================== */
function selectLicense(lic) {
  const form = document.querySelector("#updateForm");

  Object.keys(lic).forEach(key => {
    if (form[key]) form[key].value = lic[key];
  });
}

/* ===================== INSERT LICENSE ===================== */
document.querySelector("#insertForm").addEventListener("submit", async e => {
  e.preventDefault();

  const formData = Object.fromEntries(new FormData(e.target).entries());

  const res = await fetch(API, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(formData)
  });

  alert("License inserted");
  loadLicenses();
});

/* ===================== UPDATE LICENSE ===================== */
document.querySelector("#updateForm").addEventListener("submit", async e => {
  e.preventDefault();

  const formData = Object.fromEntries(new FormData(e.target).entries());
  const id = formData.licenseid;

  const res = await fetch(`${API}/${id}`, {
    method: "PUT",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(formData)
  });

  alert("License updated");
  loadLicenses();
});

/* Load on startup */
loadLicenses();
</script>

<div class="container2">
<section class="middle-columns">

    <!-- CENTER COLUMN: MIAMI IMAGES -->
    <div class="mid-col">
        <img src="./images/miami1.jpg" style="width:48%; border-radius:5px;">
        <img src="./images/miami3.jpg" style="width:48%; border-radius:5px;">
    </div>
    <!-- LEFT COLUMN: QUICK LINKS -->
    <div class="mid-col">
        <h3>Quick Links</h3>
        <hr>
        <ul class="quick-links">
            <li><a href="https://www.sc.edu" target="_blank">SC Home Page</a></li>
            <li><a href="https://sc.edu/athletics/" target="_blank">SC Athletics</a></li>
            <li><a href="https://www.reuters.com" target="_blank">Reuters</a></li>
            <li><a href="https://www.bbc.com" target="_blank">BBC</a></li>
            <li><a href="https://www.espn.com" target="_blank">ESPN</a></li>
            <li><a href="https://gamecocksonline.com/sports/mbball/cumestats/">Team Stats</a></li>
        </ul>
    </div>
    <!-- RIGHT COLUMN: SITEMAP TABLE -->
    <div class="mid-col">
        <h3>Site Map</h3>
        <hr>
        <table class="sitemap-table">
            <tr><th>Site Information</th><th>Page Link</th><th>Date Updated</th></tr>
            <tr><td>Licenses</td><td><a href="mylicenses.html">MyLicenses</a></td><td>01/15/2026</td></tr>
            <tr><td>Usage</td><td><a href="mylicenselogs.html">MyLicenseLogs</a></td><td>01/15/2026</td></tr>
            <tr><td>Types</td><td><a href="licenseinfo.html">LicenseInfo</a></td><td>01/15/2026</td></tr>
            <tr><td>Cart</td><td><a href="mycart.html?uid=1">MyCart</a></td><td>01/15/2026</td></tr>
            <tr><td>TypeReviews</td><td><a href="reviews.html">Reviews</a></td><td>01/15/2026</td></tr>
        </table>
    </div>

</section>
<section class="sales">
<div class="cta" id="contact">
    <h2>Talk to Sales</h2>
    <span>Contact our enterprise sales team to discuss licensing, pricing, and deployment options.</span><BR>
    <a href="contacts.html">Contact Sales</a>
</div>
</section>
<footer class="footer" style="text-align: center;">
    © 2026 Greenville Associates Enterprise Software. All rights reserved.
</footer>
</div>
</body>
</html>













